<% if(typeof userName !== 'undefined' && userName!=null ){%>
<form action="/expense/add" method="post" class="p-5">
    <div class="form-row">
      <div class="form-group col-md-2">
        <label for="amount">Amount</label>
        <input name="amount" type="text" class="form-control" id="amount" placeholder="amount" required>
      </div>
      <div class="form-group col-md-2">
        <label for="date">Date</label>
        <input type="date" class="form-control" id="date" name="date" />
      </div>
    </div>
    <div class="form-group">
      <label for="comment">comment</label>
      <input type="text" class="form-control" id="comment" name="comment" placeholder="spent for ?">
    </div>
    <input type="hidden" id="selected-tags-input" name="tags" value="">
    <h5>Expense Tags:</h5>
<div class="tag-list" id="tag-list">
    <div class="tag">family</div>
    <div class="tag">self</div>
    <div class="tag">medical</div>
    <div class="tag">overexpense</div>
    <div class="tag">groceries</div>
    <div class="tag">entertainment</div>
    <div class="tag">medical</div>
    <div class="tag">hey</div>
    <div class="tag">groceriessucks</div>
    <div class="tag">entertainmentsucks</div>
    <div class="tag">medicalsucks</div>
    <div class="tag">verexpensenight</div>
  
</div>
<h5>Selected Tags:</h5>
<div class="selected-tags" id="selected-tags">
   <!-- Selected tags will appear here -->
</div>
    <button type="submit" class="btn btn-primary mt-2">Record Expense</button>
</form>


<script>
    const tagList = document.getElementById('tag-list');
    const tags = document.getElementById('selected-tags');
    const tagsInput = document.getElementById('selected-tags-input');
    let tagsArray = [];

    // Function to update the hidden input
    function updatetagsInput() {
        tagsInput.value = tagsArray.join(',');
    }

    // Handle tag selection
    tagList.addEventListener('click', function(e) {
        if (e.target.classList.contains('tag')) {
            const tag = e.target.textContent;
            // Add to selected tags if not already selected
            if (!tagsArray.includes(tag)) {
                tagsArray.push(tag);
                // Create the selected tag element with remove button
                const selectedTagElement = document.createElement('div');
                selectedTagElement.classList.add('selected-tag');
                selectedTagElement.innerHTML = `<span>${tag}</span><div class="remove-tag">Ã—</div>`;
                tags.appendChild(selectedTagElement);
                // Update hidden input value
                updatetagsInput();
            }
        }
    });

    // Handle removing tags
    tags.addEventListener('click', function(e) {
        if (e.target.classList.contains('remove-tag')) {
            const tag = e.target.parentElement.querySelector('span').textContent;
            // Remove from selected tags array
            tagsArray = tagsArray.filter(t => t !== tag);
            // Remove the tag from the UI
            e.target.parentElement.remove();
            // Update hidden input value
            updatetagsInput();
        }
    });
        // Get the current date
    const today = new Date().toISOString().split('T')[0]; // format to YYYY-MM-DD
    // Set the input field's value to today's date
    document.getElementById('date').value = today;
</script>
<%}else{%>
    <h1>Welcome to Spendly - Your Smart Expense Tracker</h1>
    Managing your finances just got easier with Spendly! Whether you're budgeting for family expenses, tracking personal spending, or analyzing trends in your expenditures, Spendly helps you stay on top of your finances effortlessly.
    
    <h2>Why Spendly?</h2>
    Easy Expense Tracking: Add and categorize your expenses with custom tags like family, medical, groceries, and more.
    Monthly Summaries: Get a clear view of how much you're spending each month, all neatly organized by category.
    Visual Analytics: Spot spending patterns with insightful trends and charts.
    Download Reports: Generate and download detailed expense reports in PDF format for any month.
    How It Works
    Sign Up or Log In: Create your account or log in to access your personal Spendly dashboard.
    
    Add Expenses: Enter your daily expenses quickly and categorize them with tags like Family, Groceries, Entertainment, or create your own custom tags!
    
    View Monthly Summary: Get a detailed breakdown of your monthly expenses. You can see a list of all the expenses for a particular month or dive deeper into specific categories.
    
    Track Spending Trends: View your spending trends over time and see where your money goes. Analyze by month or category to get a better handle on your budget.
    
    Download Expense Reports: Need a copy of your expenses? Simply download a PDF report for any month, ready to print or share with others.
    
    <h2>Features at a Glance</h2>
    <h3>Categorized Expenses:</h3> Group your spending with custom tags.
    <h3>Visual Insights:</h3> Analyze spending trends and patterns easily.
    <h3>PDF Reports:</h3> Download and share detailed monthly reports.
    <h4>Custom Tags:</h4> Personalize how you categorize your spending.
    <h4>Secure & Private:</h4> Your data is safe and secure with us.
    Get Started Now!
    Take control of your finances with Spendly and make budgeting stress-free. Sign up now to track your spending and achieve your financial goals!



<%}%>